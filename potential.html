<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>3&nbsp; The interconnectedness between regions and technologies – THESIS</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./results.html" rel="next">
<link href="./lit_rev.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-a0454205e7807805702eca4f1f89a20d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<meta name="mermaid-theme" content="default">
<script src="site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="site_libs/quarto-diagram/mermaid.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./potential.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">The interconnectedness between regions and technologies</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">THESIS</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lit_rev.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Literature review</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./potential.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">The interconnectedness between regions and technologies</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./results.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Results</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Summary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#methodological-motivation" id="toc-methodological-motivation" class="nav-link active" data-scroll-target="#methodological-motivation"><span class="header-section-number">3.1</span> Methodological Motivation</a></li>
  <li><a href="#notation-and-data-structure" id="toc-notation-and-data-structure" class="nav-link" data-scroll-target="#notation-and-data-structure"><span class="header-section-number">3.2</span> Notation and Data Structure</a></li>
  <li><a href="#revealed-technological-advantage" id="toc-revealed-technological-advantage" class="nav-link" data-scroll-target="#revealed-technological-advantage"><span class="header-section-number">3.3</span> Revealed Technological Advantage</a></li>
  <li><a href="#random-forest-algorithm" id="toc-random-forest-algorithm" class="nav-link" data-scroll-target="#random-forest-algorithm"><span class="header-section-number">3.4</span> Random Forest Algorithm</a>
  <ul class="collapse">
  <li><a href="#algorithm-structure" id="toc-algorithm-structure" class="nav-link" data-scroll-target="#algorithm-structure"><span class="header-section-number">3.4.1</span> Algorithm Structure</a></li>
  <li><a href="#tree-construction-via-recursive-partitioning" id="toc-tree-construction-via-recursive-partitioning" class="nav-link" data-scroll-target="#tree-construction-via-recursive-partitioning"><span class="header-section-number">3.4.2</span> Tree Construction via Recursive Partitioning</a></li>
  <li><a href="#gini-impurity-as-split-criterion" id="toc-gini-impurity-as-split-criterion" class="nav-link" data-scroll-target="#gini-impurity-as-split-criterion"><span class="header-section-number">3.4.3</span> Gini Impurity as Split Criterion</a></li>
  <li><a href="#termination-and-class-assignment" id="toc-termination-and-class-assignment" class="nav-link" data-scroll-target="#termination-and-class-assignment"><span class="header-section-number">3.4.4</span> Termination and Class Assignment</a></li>
  <li><a href="#ensemble-prediction" id="toc-ensemble-prediction" class="nav-link" data-scroll-target="#ensemble-prediction"><span class="header-section-number">3.4.5</span> Ensemble Prediction</a></li>
  <li><a href="#variance-reduction-mechanism" id="toc-variance-reduction-mechanism" class="nav-link" data-scroll-target="#variance-reduction-mechanism"><span class="header-section-number">3.4.6</span> Variance Reduction Mechanism</a></li>
  <li><a href="#feature-importance" id="toc-feature-importance" class="nav-link" data-scroll-target="#feature-importance"><span class="header-section-number">3.4.7</span> Feature Importance</a></li>
  </ul></li>
  <li><a href="#connecting-random-forest-to-the-relatedness-framework" id="toc-connecting-random-forest-to-the-relatedness-framework" class="nav-link" data-scroll-target="#connecting-random-forest-to-the-relatedness-framework"><span class="header-section-number">3.5</span> Connecting Random Forest to the Relatedness Framework</a></li>
  <li><a href="#technological-potential" id="toc-technological-potential" class="nav-link" data-scroll-target="#technological-potential"><span class="header-section-number">3.6</span> Technological Potential</a>
  <ul class="collapse">
  <li><a href="#training-procedure" id="toc-training-procedure" class="nav-link" data-scroll-target="#training-procedure"><span class="header-section-number">3.6.1</span> Training Procedure</a></li>
  <li><a href="#output-regional-technological-potential" id="toc-output-regional-technological-potential" class="nav-link" data-scroll-target="#output-regional-technological-potential"><span class="header-section-number">3.6.2</span> Output: Regional Technological Potential</a></li>
  <li><a href="#conceptual-interpretation" id="toc-conceptual-interpretation" class="nav-link" data-scroll-target="#conceptual-interpretation"><span class="header-section-number">3.6.3</span> Conceptual Interpretation</a></li>
  <li><a href="#empirical-implications" id="toc-empirical-implications" class="nav-link" data-scroll-target="#empirical-implications"><span class="header-section-number">3.6.4</span> Empirical Implications</a></li>
  </ul></li>
  <li><a href="#feature-importance-technology-space-fits" id="toc-feature-importance-technology-space-fits" class="nav-link" data-scroll-target="#feature-importance-technology-space-fits"><span class="header-section-number">3.7</span> Feature Importance Technology Space (FITS)</a>
  <ul class="collapse">
  <li><a href="#fits-construction" id="toc-fits-construction" class="nav-link" data-scroll-target="#fits-construction"><span class="header-section-number">3.7.1</span> FITS Construction</a></li>
  <li><a href="#mathematical-formulation" id="toc-mathematical-formulation" class="nav-link" data-scroll-target="#mathematical-formulation"><span class="header-section-number">3.7.2</span> Mathematical Formulation</a></li>
  <li><a href="#asymmetry-and-hierarchy" id="toc-asymmetry-and-hierarchy" class="nav-link" data-scroll-target="#asymmetry-and-hierarchy"><span class="header-section-number">3.7.3</span> Asymmetry and Hierarchy</a></li>
  <li><a href="#conceptual-interpretation-1" id="toc-conceptual-interpretation-1" class="nav-link" data-scroll-target="#conceptual-interpretation-1"><span class="header-section-number">3.7.4</span> Conceptual Interpretation</a></li>
  <li><a href="#empirical-implications-1" id="toc-empirical-implications-1" class="nav-link" data-scroll-target="#empirical-implications-1"><span class="header-section-number">3.7.5</span> Empirical Implications</a></li>
  <li><a href="#network-visualization" id="toc-network-visualization" class="nav-link" data-scroll-target="#network-visualization"><span class="header-section-number">3.7.6</span> Network Visualization</a></li>
  </ul></li>
  <li><a href="#coherence-bridging-technology-networks-and-regional-portfolios" id="toc-coherence-bridging-technology-networks-and-regional-portfolios" class="nav-link" data-scroll-target="#coherence-bridging-technology-networks-and-regional-portfolios"><span class="header-section-number">3.8</span> Coherence: Bridging Technology Networks and Regional Portfolios</a>
  <ul class="collapse">
  <li><a href="#conceptual-motivation" id="toc-conceptual-motivation" class="nav-link" data-scroll-target="#conceptual-motivation"><span class="header-section-number">3.8.1</span> Conceptual Motivation</a></li>
  <li><a href="#mathematical-construction" id="toc-mathematical-construction" class="nav-link" data-scroll-target="#mathematical-construction"><span class="header-section-number">3.8.2</span> Mathematical Construction</a></li>
  <li><a href="#interpretation" id="toc-interpretation" class="nav-link" data-scroll-target="#interpretation"><span class="header-section-number">3.8.3</span> Interpretation</a></li>
  <li><a href="#empirical-application" id="toc-empirical-application" class="nav-link" data-scroll-target="#empirical-application"><span class="header-section-number">3.8.4</span> Empirical Application</a></li>
  </ul></li>
  <li><a href="#summary-of-methodological-framework" id="toc-summary-of-methodological-framework" class="nav-link" data-scroll-target="#summary-of-methodological-framework"><span class="header-section-number">4</span> Summary of Methodological Framework</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">The interconnectedness between regions and technologies</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="methodological-motivation" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="methodological-motivation"><span class="header-section-number">3.1</span> Methodological Motivation</h2>
<p>Traditional relatedness frameworks model diversification through symmetric co-occurrence matrices and linear aggregation of relatedness density <span class="citation" data-cites="hausmann2011network">(<a href="references.html#ref-hausmann2011network" role="doc-biblioref">Hausmann and Hidalgo 2011</a>)</span>. However, as established in our problem statement, these constructs suffer from three structural limitations: (1) symmetry assumptions that obscure directional dependencies between technologies, (2) linear aggregation that loses granular information about technology-specific requirements, and (3) noise when technologies outnumber regions.</p>
<p>We address these limitations by replacing traditional measures with machine learning-derived alternatives. Specifically, we use Random Forest models to generate: (1) <strong>asymmetric feature importance networks (FITS)</strong> that capture directional, hierarchical technology relationships, replacing symmetric relatedness measures; and (2) <strong>predicted probabilities (technological potential)</strong> that estimate region-specific feasibility of technology adoption, replacing linear relatedness density. This approach enables the contextualization of diversification strategies by accounting for technology-specific characteristics, regional knowledge infrastructure, and broader spatial dynamics—elements that traditional measures cannot adequately capture.</p>
<p>Before detailing our methodology, we briefly situate this approach within the broader literature. The Principle of Relatedness (PoR) formalizes the empirical observation that shared input requirements (knowledge, resources, capabilities) determine diversification feasibility <span class="citation" data-cites="hidalgo2018principle hidalgo2021economic">(<a href="references.html#ref-hidalgo2018principle" role="doc-biblioref">Hidalgo et al. 2018</a>; <a href="references.html#ref-hidalgo2021economic" role="doc-biblioref">Hidalgo 2021</a>)</span>. Economic Complexity (EC) complements this by quantifying sophistication patterns <span class="citation" data-cites="hidalgo2009building">(<a href="references.html#ref-hidalgo2009building" role="doc-biblioref">Hidalgo and Hausmann 2009</a>)</span>. While these frameworks have proven valuable for policy <span class="citation" data-cites="zaccaria2018integrating albora2021economic">(<a href="references.html#ref-zaccaria2018integrating" role="doc-biblioref">Zaccaria et al. 2018</a>; <a href="references.html#ref-albora2021economic" role="doc-biblioref">E and A 2021</a>)</span>, deriving granular, context-specific implications remains challenging <span class="citation" data-cites="hidalgo2023policy li2024evaluating">(<a href="references.html#ref-hidalgo2023policy" role="doc-biblioref">Hidalgo 2023</a>; <a href="references.html#ref-li2024evaluating" role="doc-biblioref">Li and Neffke 2024</a>)</span>. Recent work on unrelated diversification <span class="citation" data-cites="pinheiro2022time boschma2023role">(<a href="references.html#ref-pinheiro2022time" role="doc-biblioref">Flávio L. Pinheiro et al. 2022</a>; <a href="references.html#ref-boschma2023role" role="doc-biblioref">Boschma et al. 2023</a>)</span>, geographic inequalities <span class="citation" data-cites="pinheiro2025dark hartmann2017linking">(<a href="references.html#ref-pinheiro2025dark" role="doc-biblioref">Flavio L. Pinheiro et al. 2025</a>; <a href="references.html#ref-hartmann2017linking" role="doc-biblioref">Hartmann et al. 2017</a>)</span>, and emerging technologies <span class="citation" data-cites="lee2018early fessina2024identifying">(<a href="references.html#ref-lee2018early" role="doc-biblioref">Lee et al. 2018</a>; <a href="references.html#ref-fessina2024identifying" role="doc-biblioref">Fessina et al. 2024</a>)</span> highlights the need for methodologies that capture contextual nuances beyond path dependency identification.</p>
<p>Our approach responds to this need by modeling technology relationships and regional capabilities in ways that explicitly incorporate heterogeneity. The following sections establish our notation system, describe the Random Forest algorithm, and detail how we construct and interpret technological potential, FITS, and coherence measures.</p>
</section>
<section id="notation-and-data-structure" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="notation-and-data-structure"><span class="header-section-number">3.2</span> Notation and Data Structure</h2>
<p>We establish consistent notation used throughout:</p>
<p><strong>Sets:</strong> - <span class="math inline">\(\mathcal{T} = \{t : 1 \le t \le N_T\}\)</span>: set of technologies - <span class="math inline">\(\mathcal{R} = \{r : 1 \le r \le N_R\}\)</span>: set of regions<br>
- <span class="math inline">\(\mathcal{Y} = \{y : 1 \le y \le N_Y\}\)</span>: set of years - <span class="math inline">\(\mathcal{C} = \{c : 1 \le c \le N_C\}\)</span>: set of technology categories</p>
<p><strong>Variables:</strong> - <span class="math inline">\(X_{r,t,y}\)</span>: patent count for region <span class="math inline">\(r\)</span> in technology <span class="math inline">\(t\)</span> during year <span class="math inline">\(y\)</span> - <span class="math inline">\(\text{RTA}_{r,t,y}\)</span>: Revealed Comparative Advantage (later referred to as RTA for patents) - <span class="math inline">\(z_{r,t,y} \in \{0,1\}\)</span>: binary indicator of technological capacity (specialization) - <span class="math inline">\(p_{r,t,y} \in [0,1]\)</span>: predicted probability of future specialization (technological potential) - <span class="math inline">\(I_{t \to t'}\)</span>: feature importance weight, directed relationship from technology <span class="math inline">\(t\)</span> to <span class="math inline">\(t'\)</span></p>
<p>We use European Patent Office data (1978-2021) classified at the 4-digit IPC level, yielding 641 distinct technologies across 345 NUTS2 regions in 34 European countries. IPC classifications provide hierarchical structure: section (letter), class (two digits), subclass (letter). For example, F16H encompasses Section F (Mechanical engineering), Class 16 (engineering elements for mechanical power transmission), and Subclass H (gearing systems). We supplement patent data with Eurostat regional socio-economic indicators detailed in subsequent sections.</p>
</section>
<section id="revealed-technological-advantage" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="revealed-technological-advantage"><span class="header-section-number">3.3</span> Revealed Technological Advantage</h2>
<p>We quantify regional specialization using the Revealed Comparative Advantage <span class="citation" data-cites="balassa1965RTA">(<a href="references.html#ref-balassa1965RTA" role="doc-biblioref"><strong>balassa1965RTA?</strong></a>)</span>. Although originally designed for trade data, this metric has been widely adopted in innovation geography literature. Following <span class="citation" data-cites="balland2017geography">(<a href="references.html#ref-balland2017geography" role="doc-biblioref"><strong>balland2017geography?</strong></a>)</span>, we refer to it as Revealed Technological Advantage (RTA) in our patent context. The RTA measures relative specialization, enabling simultaneous capture of expertise depth and portfolio diversity while reducing co-occurrence noise <span class="citation" data-cites="fessina2024identifying">(<a href="references.html#ref-fessina2024identifying" role="doc-biblioref">Fessina et al. 2024</a>)</span>. Despite critiques regarding patent-based applications <span class="citation" data-cites="balland2019beyond diodato2023economic">(<a href="references.html#ref-balland2019beyond" role="doc-biblioref">Balland and Boschma 2019</a>; <a href="references.html#ref-diodato2023economic" role="doc-biblioref">Diodato et al. 2023</a>)</span>, RTA aligns with our objective of capturing meaningful technology relationships through machine learning rather than raw co-occurrence.</p>
<p>The RTA for region <span class="math inline">\(r\)</span> in technology <span class="math inline">\(t\)</span> during year <span class="math inline">\(y\)</span> is:</p>
<p><span class="math display">\[
\text{RTA}_{r,t,y}
= \frac{\displaystyle\frac{X_{r,t,y}}{\sum_{t'} X_{r,t',y}}}
       {\displaystyle\frac{\sum_{r'} X_{r',t,y}}{\sum_{r',t'} X_{r',t',y}}}
= \frac{X_{r,t,y}\,\sum_{r',t'}X_{r',t',y}}
       {\bigl(\sum_{t'}X_{r,t',y}\bigr)\,\bigl(\sum_{r'}X_{r',t,y}\bigr)}
\]</span></p>
<p>For each year <span class="math inline">\(y\)</span>, we construct the RTA matrix <span class="math inline">\(\mathbf{R}^{(y)}\)</span> with entries <span class="math inline">\(\text{RTA}_{r,t,y}\)</span>:</p>
<p><span class="math display">\[
\mathbf{R}^{(y)}
= \bigl[\text{RTA}_{r,t,y}\bigr]_{r=1,\dots,N_{R}}^{t=1,\dots,N_{T}}
\]</span></p>
<p>These yearly matrices form the foundation for all subsequent modeling. We binarize specialization for classification tasks:</p>
<p><span class="math display">\[
z_{r,t,y}
\;=\;
\begin{cases}
1 &amp; \text{if }\text{RTA}_{r,t,y}\ge1 \\
0 &amp; \text{otherwise}
\end{cases}
\]</span></p>
<p>where <span class="math inline">\(z_{r,t,y} = 1\)</span> indicates region <span class="math inline">\(r\)</span> has comparative advantage (specialization) in technology <span class="math inline">\(t\)</span> at year <span class="math inline">\(y\)</span>.</p>
</section>
<section id="random-forest-algorithm" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="random-forest-algorithm"><span class="header-section-number">3.4</span> Random Forest Algorithm</h2>
<p>Before detailing our applications, we provide comprehensive context on the Random Forest algorithm, which fuels our entire methodological approach. We focus on binary classification where <span class="math inline">\(y_i \in \{0,1\}\)</span>.</p>
<section id="algorithm-structure" class="level3" data-number="3.4.1">
<h3 data-number="3.4.1" class="anchored" data-anchor-id="algorithm-structure"><span class="header-section-number">3.4.1</span> Algorithm Structure</h3>
<p>Random Forest constructs an ensemble of <span class="math inline">\(B\)</span> decision trees through bootstrap aggregating (bagging) with random feature subsampling. Each tree <span class="math inline">\(T_b\)</span> is built on a bootstrap sample <span class="math inline">\(\mathcal{D}_b^*\)</span> drawn with replacement from the original dataset.</p>
</section>
<section id="tree-construction-via-recursive-partitioning" class="level3" data-number="3.4.2">
<h3 data-number="3.4.2" class="anchored" data-anchor-id="tree-construction-via-recursive-partitioning"><span class="header-section-number">3.4.2</span> Tree Construction via Recursive Partitioning</h3>
<p>Each tree recursively partitions the feature space through binary splits. At node <span class="math inline">\(t\)</span>, we randomly select <span class="math inline">\(m\)</span> features (typically <span class="math inline">\(m = \sqrt{p}\)</span>) and evaluate all possible splits within this subset. For feature <span class="math inline">\(j\)</span> and threshold <span class="math inline">\(\tau\)</span>, the split creates two child nodes: <span class="math inline">\(t_L = \{i : x_{ij} \leq \tau\}\)</span> and <span class="math inline">\(t_R = \{i : x_{ij} &gt; \tau\}\)</span>.</p>
</section>
<section id="gini-impurity-as-split-criterion" class="level3" data-number="3.4.3">
<h3 data-number="3.4.3" class="anchored" data-anchor-id="gini-impurity-as-split-criterion"><span class="header-section-number">3.4.3</span> Gini Impurity as Split Criterion</h3>
<p>Split quality is assessed via Gini impurity:</p>
<p><span class="math display">\[G(t) = 1 - \sum_{k=0}^{1} p_k^2(t) = 2p_0(t)p_1(t)\]</span></p>
<p>where <span class="math inline">\(p_k(t) = n_k(t)/n(t)\)</span> represents the proportion of class <span class="math inline">\(k\)</span> observations at node <span class="math inline">\(t\)</span>. Gini impurity quantifies node heterogeneity: <span class="math inline">\(G=0\)</span> indicates perfect purity (homogeneous class), while <span class="math inline">\(G=0.5\)</span> indicates maximum impurity (equal class distribution). The optimal split maximizes weighted impurity reduction:</p>
<p><span class="math display">\[\Delta G(j, \tau) = G(t) - \left[\frac{n(t_L)}{n(t)} G(t_L) + \frac{n(t_R)}{n(t)} G(t_R)\right]\]</span></p>
<p>Weighting by relative node size prevents trivial splits that isolate single observations into pure but uninformative leaves.</p>
</section>
<section id="termination-and-class-assignment" class="level3" data-number="3.4.4">
<h3 data-number="3.4.4" class="anchored" data-anchor-id="termination-and-class-assignment"><span class="header-section-number">3.4.4</span> Termination and Class Assignment</h3>
<p>Recursive splitting continues until predefined stopping criteria: node purity (<span class="math inline">\(G=0\)</span>), minimum node size threshold, or maximum tree depth. Terminal nodes are assigned the majority class of their constituent observations.</p>
</section>
<section id="ensemble-prediction" class="level3" data-number="3.4.5">
<h3 data-number="3.4.5" class="anchored" data-anchor-id="ensemble-prediction"><span class="header-section-number">3.4.5</span> Ensemble Prediction</h3>
<p>For prediction, observation <span class="math inline">\(\mathbf{x}\)</span> traverses all <span class="math inline">\(B\)</span> trees. Final classification aggregates individual tree predictions via majority voting:</p>
<p><span class="math display">\[\hat{y}(\mathbf{x}) = \text{mode}\{\hat{y}_1(\mathbf{x}), \ldots, \hat{y}_B(\mathbf{x})\}\]</span></p>
<p>Class probabilities are estimated as the proportion of trees predicting each class:</p>
<p><span class="math display">\[\hat{P}(y=1|\mathbf{x}) = B^{-1}\sum_{b=1}^{B} \mathbb{I}[\hat{y}_b(\mathbf{x})=1]\]</span></p>
<p>This probability represents empirical vote share across trees. Values near 1 indicate strong consensus for class 1 (high confidence), while values near 0.5 reflect uncertainty. Unlike parametric models, these are data-driven vote proportions rather than model-based probability estimates.</p>
</section>
<section id="variance-reduction-mechanism" class="level3" data-number="3.4.6">
<h3 data-number="3.4.6" class="anchored" data-anchor-id="variance-reduction-mechanism"><span class="header-section-number">3.4.6</span> Variance Reduction Mechanism</h3>
<p>The algorithm’s effectiveness stems from variance reduction through decorrelated predictions. Bootstrap sampling and random feature selection reduce inter-tree correlation <span class="math inline">\(\rho\)</span>, yielding ensemble variance:</p>
<p><span class="math display">\[\text{Var}(\bar{y}) = \rho\sigma^2 + \frac{1-\rho}{B}\sigma^2\]</span></p>
<p>As <span class="math inline">\(B\)</span> increases and <span class="math inline">\(\rho\)</span> decreases, ensemble variance diminishes while maintaining the low bias of flexible tree models.</p>
</section>
<section id="feature-importance" class="level3" data-number="3.4.7">
<h3 data-number="3.4.7" class="anchored" data-anchor-id="feature-importance"><span class="header-section-number">3.4.7</span> Feature Importance</h3>
<p>Feature importance quantifies each predictor’s contribution by aggregating Gini impurity reductions:</p>
<p><span class="math display">\[I(j) = \frac{1}{B}\sum_{b=1}^{B} \sum_{t \in T_b : v(t)=j} \Delta G(t)\]</span></p>
<p>where the sum runs over all nodes using feature <span class="math inline">\(j\)</span> for splitting. Higher values indicate features consistently creating purer partitions. Feature importance measures predictive association rather than causal effect, and suffers from bias toward high-cardinality features and correlated predictor sets. It ranks predictive relevance but requires caution in causal interpretation.</p>
</section>
</section>
<section id="connecting-random-forest-to-the-relatedness-framework" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="connecting-random-forest-to-the-relatedness-framework"><span class="header-section-number">3.5</span> Connecting Random Forest to the Relatedness Framework</h2>
<p>We apply Random Forest in two complementary ways that replace traditional relatedness constructs:</p>
<p><strong>A. Technological Potential</strong> estimates <span class="math inline">\(p_{r,t,y}\)</span> = probability of future specialization in technology <span class="math inline">\(t\)</span> for region <span class="math inline">\(r\)</span>. This replaces <strong>relatedness density</strong>—instead of linearly aggregating symmetric co-occurrence frequencies, we predict region-specific feasibility using past technology portfolios. This captures non-linear interactions and regional heterogeneity that linear measures miss.</p>
<p><strong>B. Feature Importance Technology Space (FITS)</strong> extracts <span class="math inline">\(I_{t \to t'}\)</span> = directional dependencies between technologies. This replaces <strong>symmetric relatedness</strong>—instead of co-occurrence frequencies, we identify which technologies predict others’ future adoption. Asymmetry reveals hierarchical structures: if <span class="math inline">\(I_{t \to t'} \gg I_{t' \to t}\)</span>, technology <span class="math inline">\(t\)</span> is a prerequisite or “stepping stone” toward <span class="math inline">\(t'\)</span>.</p>
<p>Together, these measures enable contextualized diversification analysis: FITS reveals technology-level hierarchies, Potential quantifies region-specific feasibility, and their combination allows testing how regional infrastructure, national ecosystems, and spatial factors moderate technology adoption patterns.</p>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">graph TB
    A[Input: RCA values&lt;br/&gt;for all technologies&lt;br/&gt;except target] --&gt; B[Tree 1]
    A --&gt; C[Tree 2]
    A --&gt; D[Tree 3]
    A --&gt; E[...]
    A --&gt; F[Tree B]
    
    B --&gt; G[Vote: 1]
    C --&gt; H[Vote: 0]
    D --&gt; I[Vote: 1]
    E --&gt; J[Vote: 1]
    F --&gt; K[Vote: 1]
    
    G --&gt; L[Aggregate Votes]
    H --&gt; L
    I --&gt; L
    J --&gt; L
    K --&gt; L
    
    L --&gt; M[Probability = 4/5 = 0.80&lt;br/&gt;Region will specialize&lt;br/&gt;in target technology]
    
    style A fill:#e1f5ff
    style M fill:#ffe1e1

</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="technological-potential" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="technological-potential"><span class="header-section-number">3.6</span> Technological Potential</h2>
<p>We follow the methodology of <span class="citation" data-cites="albora2023product">Albora et al. (<a href="references.html#ref-albora2023product" role="doc-biblioref">2023</a>)</span>, originally developed for trade data. The innovation lies in modeling each technology separately rather than constructing a single global model. For every technology <span class="math inline">\(i \in \mathcal{T}\)</span>, we train a binary classification model where:</p>
<ul>
<li><strong>Outcome</strong>: <span class="math inline">\(z_{r,i,y}\)</span> (whether region <span class="math inline">\(r\)</span> specializes in technology <span class="math inline">\(i\)</span> at year <span class="math inline">\(y\)</span>)</li>
<li><strong>Features</strong>: <span class="math inline">\(\{\text{RTA}_{r,t,y-\delta} : t \in \mathcal{T}, t \neq i\}\)</span> (RTA values for all other technologies <span class="math inline">\(\delta\)</span> years prior)</li>
</ul>
<p>This technology-specific approach enables each model to learn unique dependency patterns. Setting <span class="math inline">\(\delta = 4\)</span> years balances predictive performance with data availability <span class="citation" data-cites="andreoni2019political">(<a href="references.html#ref-andreoni2019political" role="doc-biblioref">Andreoni and Chang 2019</a>)</span>.</p>
<section id="training-procedure" class="level3" data-number="3.6.1">
<h3 data-number="3.6.1" class="anchored" data-anchor-id="training-procedure"><span class="header-section-number">3.6.1</span> Training Procedure</h3>
<p>We predict specialization for target years <span class="math inline">\(y_t \in \{2008, \ldots, 2018\}\)</span> using data from 1978 onward. For each target year <span class="math inline">\(y_t\)</span> and technology <span class="math inline">\(i\)</span>:</p>
<p><strong>Training set:</strong> <span class="math display">\[
X_{\text{train}} = \{ \text{RTA}_{r,t,y} \mid y \in [1978, y_t - 2\delta], t \neq i\}
\]</span> <span class="math display">\[
Y_{\text{train}} = \{z_{r,i,y} \mid y \in [1978 + \delta,  y_t - \delta]\}
\]</span></p>
<p><strong>Test set:</strong> <span class="math display">\[
X_{\text{test}} = \{ \text{RTA}_{r,t,y_t-\delta} \mid t \neq i\}
\]</span> <span class="math display">\[
Y_{\text{test}} = \{z_{r,i,y_t}\}
\]</span></p>
<p>This produces 7,051 models (641 technologies × 11 years). Given computational constraints, we performed cross-validation on a random sample of four technologies (G06G, B67B, D02J, C08J) and applied the most frequent optimal parameters across all models: <code>mtry = 139</code>, <code>trees = 100</code>, <code>min_n = 38</code>. Training was conducted in R using the Ranger package <span class="citation" data-cites="wright2017ranger">(<a href="references.html#ref-wright2017ranger" role="doc-biblioref">Wright and Ziegler 2017</a>)</span>, orchestrated via the targets pipeline <span class="citation" data-cites="landau2021targets">(<a href="references.html#ref-landau2021targets" role="doc-biblioref">Landau 2021</a>)</span> within the tidymodels framework.</p>
</section>
<section id="output-regional-technological-potential" class="level3" data-number="3.6.2">
<h3 data-number="3.6.2" class="anchored" data-anchor-id="output-regional-technological-potential"><span class="header-section-number">3.6.2</span> Output: Regional Technological Potential</h3>
<p>Each model produces probabilities <span class="math inline">\(p_{r,i,y} = P(z_{r,i,y} = 1 \mid \text{RTA}_{r,\cdot,y-\delta})\)</span> representing the likelihood that region <span class="math inline">\(r\)</span> develops specialization in technology <span class="math inline">\(i\)</span> at year <span class="math inline">\(y\)</span> given its past portfolio. These probabilities constitute <strong>regional technological potential</strong>—a forward-looking, region-specific measure of diversification feasibility.</p>
<p>Aggregating across technologies yields average regional potential:</p>
<p><span class="math display">\[p_{r,y} = \frac{\sum_{t} p_{r,t,y}}{N_T}\]</span></p>
</section>
<section id="conceptual-interpretation" class="level3" data-number="3.6.3">
<h3 data-number="3.6.3" class="anchored" data-anchor-id="conceptual-interpretation"><span class="header-section-number">3.6.3</span> Conceptual Interpretation</h3>
<p>Technological potential differs fundamentally from relatedness density. While relatedness density assumes technologies combine linearly and symmetrically, potential: 1. Captures <strong>non-linear interactions</strong> between technologies through Random Forest’s decision tree structure 2. Allows <strong>asymmetric dependencies</strong> where technology <span class="math inline">\(t\)</span> may enable <span class="math inline">\(t'\)</span> but not vice versa 3. Produces <strong>region-specific estimates</strong> rather than universal technology-pair relationships 4. Reflects <strong>time-varying dynamics</strong> by training on expanding windows of historical data</p>
</section>
<section id="empirical-implications" class="level3" data-number="3.6.4">
<h3 data-number="3.6.4" class="anchored" data-anchor-id="empirical-implications"><span class="header-section-number">3.6.4</span> Empirical Implications</h3>
<p>High potential (<span class="math inline">\(p_{r,t,y} \approx 1\)</span>) indicates a region’s existing portfolio strongly predicts future specialization in technology <span class="math inline">\(t\)</span>—the region likely possesses necessary complementary capabilities. Low potential (<span class="math inline">\(p_{r,t,y} \approx 0\)</span>) suggests capability gaps despite potential relatedness. Crucially, potential varies across regions for the same technology, enabling analysis of how regional knowledge infrastructure, national ecosystems, and spatial factors moderate diversification feasibility—our core research questions.</p>
</section>
</section>
<section id="feature-importance-technology-space-fits" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="feature-importance-technology-space-fits"><span class="header-section-number">3.7</span> Feature Importance Technology Space (FITS)</h2>
<p>Traditional technology networks use patent citations or co-occurrence patterns. Citations suffer from three limitations: (1) examiner-added citations may not reflect actual knowledge flows, (2) aggregating patent-level citations to technology-level relationships obscures directionality, and (3) citation networks are backward-looking rather than predictive <span class="citation" data-cites="fessina2024identifying">(<a href="references.html#ref-fessina2024identifying" role="doc-biblioref">Fessina et al. 2024</a>)</span>. Co-occurrence networks face the issues outlined in our problem statement: symmetry, noise, and linear assumptions.</p>
<p>FITS addresses these limitations by constructing asymmetric, predictive networks from machine learning. Rather than inferring relationships from co-occurrence, FITS extracts directional dependencies from the feature importance scores of our Technological Potential models.</p>
<section id="fits-construction" class="level3" data-number="3.7.1">
<h3 data-number="3.7.1" class="anchored" data-anchor-id="fits-construction"><span class="header-section-number">3.7.1</span> FITS Construction</h3>
<p>Recall that for each technology <span class="math inline">\(i\)</span>, we trained a Random Forest model predicting <span class="math inline">\(z_{r,i,y}\)</span> using <span class="math inline">\(\{\text{RTA}_{r,t,y-\delta} : t \neq i\}\)</span> as features. The feature importance <span class="math inline">\(I_i(t)\)</span> quantifies how much technology <span class="math inline">\(t\)</span> contributes to predicting future specialization in technology <span class="math inline">\(i\)</span> across all regions and time periods in the training data.</p>
<p>We formalize FITS as a directed, weighted network <span class="math inline">\(G = (V, E, W)\)</span> where: - <strong>Nodes</strong> <span class="math inline">\(V = \mathcal{T}\)</span>: the set of technologies - <strong>Edges</strong> <span class="math inline">\(E\)</span>: directed connections <span class="math inline">\((t \to i)\)</span> for all <span class="math inline">\(t, i \in \mathcal{T}, t \neq i\)</span> - <strong>Weights</strong> <span class="math inline">\(W_{t \to i} = I_i(t)\)</span>: feature importance of technology <span class="math inline">\(t\)</span> in model predicting technology <span class="math inline">\(i\)</span></p>
<p>We normalize weights within each target technology’s model:</p>
<p><span class="math display">\[
W_{t \to i} = \frac{I_i(t)}{\sum_{t' \neq i} I_i(t')}
\]</span></p>
<p>ensuring that for each technology <span class="math inline">\(i\)</span>, incoming edge weights sum to 1: <span class="math inline">\(\sum_{t \neq i} W_{t \to i} = 1\)</span>.</p>
</section>
<section id="mathematical-formulation" class="level3" data-number="3.7.2">
<h3 data-number="3.7.2" class="anchored" data-anchor-id="mathematical-formulation"><span class="header-section-number">3.7.2</span> Mathematical Formulation</h3>
<p>From the Random Forest algorithm, feature importance for technology <span class="math inline">\(t\)</span> in model <span class="math inline">\(M_i\)</span> (predicting technology <span class="math inline">\(i\)</span>) is:</p>
<p><span class="math display">\[
I_i(t) = \frac{1}{B}\sum_{b=1}^{B} \sum_{n \in T_b : v(n)=t} \Delta G(n)
\]</span></p>
<p>where the sum runs over all nodes <span class="math inline">\(n\)</span> in all trees <span class="math inline">\(T_b\)</span> that split on feature <span class="math inline">\(t\)</span>, and <span class="math inline">\(\Delta G(n)\)</span> is the Gini impurity reduction at node <span class="math inline">\(n\)</span>. Technologies that consistently create purer partitions when predicting <span class="math inline">\(i\)</span> receive higher importance scores.</p>
<p>The full FITS network aggregates these relationships across all 641 technologies, producing a <span class="math inline">\(641 \times 641\)</span> weighted adjacency matrix (excluding self-loops).</p>
</section>
<section id="asymmetry-and-hierarchy" class="level3" data-number="3.7.3">
<h3 data-number="3.7.3" class="anchored" data-anchor-id="asymmetry-and-hierarchy"><span class="header-section-number">3.7.3</span> Asymmetry and Hierarchy</h3>
<p>Crucially, FITS is <strong>asymmetric</strong>: <span class="math inline">\(W_{t \to i} \neq W_{i \to t}\)</span> in general. This asymmetry captures hierarchical technological dependencies:</p>
<ul>
<li>If <span class="math inline">\(W_{t \to i} \gg W_{i \to t}\)</span>, technology <span class="math inline">\(t\)</span> is a <strong>prerequisite</strong> or <strong>stepping stone</strong> toward <span class="math inline">\(i\)</span> (expertise in <span class="math inline">\(t\)</span> predicts future <span class="math inline">\(i\)</span>, but not vice versa)</li>
<li>If <span class="math inline">\(W_{t \to i} \approx W_{i \to t}\)</span>, technologies are <strong>complementary peers</strong> (mutual predictive relationships)</li>
<li>If <span class="math inline">\(W_{t \to i} \ll W_{i \to t}\)</span>, technology <span class="math inline">\(i\)</span> is a prerequisite toward <span class="math inline">\(t\)</span></li>
</ul>
<p>This hierarchical structure is invisible to symmetric co-occurrence measures and reveals technological trajectories: regions can identify which current capabilities enable paths toward desired future technologies.</p>
</section>
<section id="conceptual-interpretation-1" class="level3" data-number="3.7.4">
<h3 data-number="3.7.4" class="anchored" data-anchor-id="conceptual-interpretation-1"><span class="header-section-number">3.7.4</span> Conceptual Interpretation</h3>
<p>FITS edges represent <strong>predictive dependencies</strong> based on historical diversification patterns across all European regions. A strong edge <span class="math inline">\(t \to i\)</span> indicates that regions with RTA in technology <span class="math inline">\(t\)</span> at time <span class="math inline">\(y-\delta\)</span> frequently developed RTA in technology <span class="math inline">\(i\)</span> by time <span class="math inline">\(y\)</span>, even after controlling for all other technologies. This is fundamentally different from co-occurrence (which measures simultaneous presence) or citations (which measure backward-looking knowledge flows).</p>
</section>
<section id="empirical-implications-1" class="level3" data-number="3.7.5">
<h3 data-number="3.7.5" class="anchored" data-anchor-id="empirical-implications-1"><span class="header-section-number">3.7.5</span> Empirical Implications</h3>
<p>FITS enables novel analyses of technological landscapes: 1. <strong>Path identification</strong>: For a target technology <span class="math inline">\(i\)</span>, examine incoming edge weights to identify strong predictors (prerequisites) 2. <strong>Branching points</strong>: High out-degree nodes represent foundational technologies enabling diverse future specializations 3. <strong>Category structure</strong>: Aggregating edges by IPC categories reveals cross-domain dependencies (e.g., mechanical engineering → electronics) 4. <strong>Regional positioning</strong>: Comparing a region’s current portfolio against FITS edge patterns reveals strategic opportunities and gaps</p>
<p>In our empirical analysis, FITS allows testing whether technology-specific characteristics (position in the network hierarchy, in/out-degree patterns, category embeddings) moderate diversification outcomes—aspects traditional relatedness measures cannot capture.</p>
</section>
<section id="network-visualization" class="level3" data-number="3.7.6">
<h3 data-number="3.7.6" class="anchored" data-anchor-id="network-visualization"><span class="header-section-number">3.7.6</span> Network Visualization</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resources/technology_network.png" class="img-fluid figure-img"></p>
<figcaption>Technology Network (based on 2018 patent data)</figcaption>
</figure>
</div>
<p>The figure displays the FITS network with nodes colored by IPC category, sized by total degree, and transparency reflecting eigenvector centrality. Labels appear for high-centrality technologies. The structure reveals dense within-category connections and sparse but critical between-category bridges.</p>
</section>
</section>
<section id="coherence-bridging-technology-networks-and-regional-portfolios" class="level2" data-number="3.8">
<h2 data-number="3.8" class="anchored" data-anchor-id="coherence-bridging-technology-networks-and-regional-portfolios"><span class="header-section-number">3.8</span> Coherence: Bridging Technology Networks and Regional Portfolios</h2>
<p>FITS identifies technology-to-technology relationships. Technological Potential quantifies regional diversification feasibility. <strong>Coherence</strong> bridges these levels by measuring the alignment between a technology’s position in the FITS network and a region’s existing specialization structure.</p>
<section id="conceptual-motivation" class="level3" data-number="3.8.1">
<h3 data-number="3.8.1" class="anchored" data-anchor-id="conceptual-motivation"><span class="header-section-number">3.8.1</span> Conceptual Motivation</h3>
<p>Consider two regions, both lacking specialization in technology <span class="math inline">\(i\)</span>, both having similar potential <span class="math inline">\(p_{r,i,y}\)</span>. However, Region A specializes in technologies that are strong predictors of <span class="math inline">\(i\)</span> (high incoming FITS edges), while Region B specializes in technologies unrelated to <span class="math inline">\(i\)</span> in the network. Coherence captures this difference: Region A has high coherence with <span class="math inline">\(i\)</span> (its portfolio aligns with <span class="math inline">\(i\)</span>’s network prerequisites), while Region B has low coherence (misalignment).</p>
<p>This metric operationalizes the “knowledge coherence” and “cognitive proximity” concepts from innovation literature <span class="citation" data-cites="neffke2011how boschma2015towards">(<a href="references.html#ref-neffke2011how" role="doc-biblioref"><strong>neffke2011how?</strong></a>; <a href="references.html#ref-boschma2015towards" role="doc-biblioref"><strong>boschma2015towards?</strong></a>)</span> using our directional network structure. It enables testing whether diversification success depends not just on potential (predicted feasibility) but on the structural fit between regional portfolios and technology network positions.</p>
</section>
<section id="mathematical-construction" class="level3" data-number="3.8.2">
<h3 data-number="3.8.2" class="anchored" data-anchor-id="mathematical-construction"><span class="header-section-number">3.8.2</span> Mathematical Construction</h3>
<p>For each region <span class="math inline">\(r\)</span>, technology <span class="math inline">\(i\)</span>, and IPC category <span class="math inline">\(c\)</span>, we construct two embedding vectors capturing <span class="math inline">\(i\)</span>’s directional network position and compare them to <span class="math inline">\(r\)</span>’s average embeddings for technologies in category <span class="math inline">\(c\)</span>.</p>
<p><strong>Technology embeddings</strong> (individual technology <span class="math inline">\(i\)</span>): - Incoming: <span class="math inline">\(\text{embcat\_to}_{i,c} = \frac{\sum_{t \in c} W_{t \to i}}{|\{t \in c : W_{t \to i} &gt; 0\}|}\)</span> (average FITS weight from category <span class="math inline">\(c\)</span> to technology <span class="math inline">\(i\)</span>) - Outgoing: <span class="math inline">\(\text{embcat\_from}_{i,c} = \frac{\sum_{t' \in c} W_{i \to t'}}{|\{t' \in c : W_{i \to t'} &gt; 0\}|}\)</span> (average FITS weight from technology <span class="math inline">\(i\)</span> to category <span class="math inline">\(c\)</span>)</p>
<p><strong>Regional average embeddings</strong> (region <span class="math inline">\(r\)</span>, category <span class="math inline">\(c\)</span>): - Incoming: <span class="math inline">\(\overline{\text{embcat\_to}}_{r,c} = \frac{1}{|S_{r,c}|}\sum_{t \in S_{r,c}} \text{embcat\_to}_{t,c}\)</span> where <span class="math inline">\(S_{r,c} = \{t \in c : \text{RTA}_{r,t,y} \geq 1\}\)</span> - Outgoing: <span class="math inline">\(\overline{\text{embcat\_from}}_{r,c} = \frac{1}{|S_{r,c}|}\sum_{t \in S_{r,c}} \text{embcat\_from}_{t,c}\)</span></p>
<p><strong>Coherence</strong> is the cosine similarity between technology <span class="math inline">\(i\)</span>’s directional embeddings and region <span class="math inline">\(r\)</span>’s average directional embeddings for category <span class="math inline">\(c\)</span>:</p>
<p><span class="math display">\[
\text{Coherence}_{r,i,c,y} = \frac{\mathbf{v}_1 \cdot \mathbf{v}_2}{||\mathbf{v}_1|| \cdot ||\mathbf{v}_2||}
\]</span></p>
<p>where: - <span class="math inline">\(\mathbf{v}_1 = [\text{embcat\_to}_{i,c}, \overline{\text{embcat\_to}}_{r,c}]\)</span> - <span class="math inline">\(\mathbf{v}_2 = [\text{embcat\_from}_{i,c}, \overline{\text{embcat\_from}}_{r,c}]\)</span></p>
</section>
<section id="interpretation" class="level3" data-number="3.8.3">
<h3 data-number="3.8.3" class="anchored" data-anchor-id="interpretation"><span class="header-section-number">3.8.3</span> Interpretation</h3>
<p>Coherence ranges from -1 to 1: - <strong>High coherence</strong> (<span class="math inline">\(\approx 1\)</span>): Technology <span class="math inline">\(i\)</span>’s FITS network position (both incoming and outgoing connections to category <span class="math inline">\(c\)</span>) closely matches the average network position of technologies in which region <span class="math inline">\(r\)</span> specializes within category <span class="math inline">\(c\)</span>. The region’s existing capabilities align with the structural prerequisites and consequences of technology <span class="math inline">\(i\)</span>. - <strong>Neutral coherence</strong> (<span class="math inline">\(\approx 0\)</span>): Misalignment between technology <span class="math inline">\(i\)</span>’s relational structure and regional specialization patterns. - <strong>Negative coherence</strong> (<span class="math inline">\(\approx -1\)</span>): Technology <span class="math inline">\(i\)</span>’s network position is opposite to the region’s specialization structure (e.g., <span class="math inline">\(i\)</span> receives inputs from categories where the region sends outputs).</p>
</section>
<section id="empirical-application" class="level3" data-number="3.8.4">
<h3 data-number="3.8.4" class="anchored" data-anchor-id="empirical-application"><span class="header-section-number">3.8.4</span> Empirical Application</h3>
<p>Coherence serves two roles in our empirical analysis:</p>
<ol type="1">
<li><p><strong>Interaction with Potential</strong>: Test whether high potential translates to actual diversification only when coherence is also high (H2a: technology-specific characteristics moderated by regional knowledge coherence)</p></li>
<li><p><strong>Regional Infrastructure Measure</strong>: Aggregate coherence across a region’s non-specialized technologies indicates how well the regional portfolio is “positioned” in the FITS network for future diversification (captures knowledge infrastructure quality)</p></li>
</ol>
<p>By incorporating coherence, we test whether successful diversification requires not just predicted feasibility (potential) and related capabilities (traditional relatedness), but also structural alignment between regional portfolios and network prerequisites—a form of contextualization that traditional measures cannot capture.</p>
</section>
</section>
<section id="summary-of-methodological-framework" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Summary of Methodological Framework</h1>
<p>Our approach replaces traditional relatedness constructs with machine learning-derived measures that enable contextualized diversification analysis:</p>
<ul>
<li><strong>Technological Potential</strong> (<span class="math inline">\(p_{r,t,y}\)</span>): Region-specific, non-linear, time-varying probabilities replace linear relatedness density</li>
<li><strong>FITS Network</strong> (<span class="math inline">\(W_{t \to t'}\)</span>): Asymmetric, predictive dependencies replace symmetric co-occurrence-based relatedness<br>
</li>
<li><strong>Coherence</strong> (<span class="math inline">\(\text{Coherence}_{r,t,c,y}\)</span>): Structural alignment between regional portfolios and technology network positions captures knowledge infrastructure quality</li>
</ul>
<p>Together, these measures allow testing how diversification is contingent on regional knowledge infrastructure (RQ2), national ecosystem characteristics (RQ3), and spatial factors (RQ4) in ways that traditional relatedness frameworks cannot—addressing the core problem of contextualizing diversification strategies beyond path dependency identification.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-albora2023product" class="csl-entry" role="listitem">
Albora, Giambattista, Luciano Pietronero, Andrea Tacchella, and Andrea Zaccaria. 2023. <span>“Product Progression: A Machine Learning Approach to Forecasting Industrial Upgrading.”</span> <em>Scientific Reports</em> 13 (1): 1481.
</div>
<div id="ref-andreoni2019political" class="csl-entry" role="listitem">
Andreoni, Antonio, and Ha-Joon Chang. 2019. <span>“The Political Economy of Industrial Policy: Structural Interdependencies, Policy Alignment and Conflict Management.”</span> <em>Structural Change and Economic Dynamics</em> 48: 136–50.
</div>
<div id="ref-balland2019beyond" class="csl-entry" role="listitem">
Balland, PA, and R Boschma. 2019. <span>“Smart Specialization: Beyond Patents.”</span> <em>European Commission: Brussels, Belgium</em>.
</div>
<div id="ref-boschma2023role" class="csl-entry" role="listitem">
Boschma, Ron, Ernest Miguelez, Rosina Moreno, and Diego B Ocampo-Corrales. 2023. <span>“The Role of Relatedness and Unrelatedness for the Geography of Technological Breakthroughs in Europe.”</span> <em>Economic Geography</em> 99 (2): 117–39.
</div>
<div id="ref-diodato2023economic" class="csl-entry" role="listitem">
Diodato, Dario, Lorenzo Napolitano, Emanuele Pugliese, and Andrea Tacchella. 2023. <span>“Economic Complexity for Regional Industrial Strategies.”</span> Joint Research Centre.
</div>
<div id="ref-albora2021economic" class="csl-entry" role="listitem">
E, Pugliese, and Tacchella A. 2021. <span>“Economic Complexity Analytics: Country Factsheets.”</span> <a href="https://doi.org/10.2760/368138">https://doi.org/10.2760/368138</a>.
</div>
<div id="ref-fessina2024identifying" class="csl-entry" role="listitem">
Fessina, Massimiliano, Giambattista Albora, Andrea Tacchella, and Andrea Zaccaria. 2024. <span>“Identifying Key Products to Trigger New Exports: An Explainable Machine Learning Approach.”</span> <em>Journal of Physics: Complexity</em> 5 (2): 025003.
</div>
<div id="ref-hartmann2017linking" class="csl-entry" role="listitem">
Hartmann, Dominik, Miguel R Guevara, Cristian Jara-Figueroa, Manuel Aristarán, and César A Hidalgo. 2017. <span>“Linking Economic Complexity, Institutions, and Income Inequality.”</span> <em>World Development</em> 93: 75–93.
</div>
<div id="ref-hausmann2011network" class="csl-entry" role="listitem">
Hausmann, Ricardo, and César A Hidalgo. 2011. <span>“The Network Structure of Economic Output.”</span> <em>Journal of Economic Growth</em> 16: 309–42.
</div>
<div id="ref-hidalgo2021economic" class="csl-entry" role="listitem">
Hidalgo, César A. 2021. <span>“Economic Complexity Theory and Applications.”</span> <em>Nature Reviews Physics</em> 3 (2): 92–113.
</div>
<div id="ref-hidalgo2023policy" class="csl-entry" role="listitem">
———. 2023. <span>“The Policy Implications of Economic Complexity.”</span> <em>Research Policy</em> 52 (9): 104863.
</div>
<div id="ref-hidalgo2018principle" class="csl-entry" role="listitem">
Hidalgo, César A, Pierre-Alexandre Balland, Ron Boschma, Mercedes Delgado, Maryann Feldman, Koen Frenken, Edward Glaeser, et al. 2018. <span>“The Principle of Relatedness.”</span> In <em>Unifying Themes in Complex Systems IX: Proceedings of the Ninth International Conference on Complex Systems 9</em>, 451–57. Springer.
</div>
<div id="ref-hidalgo2009building" class="csl-entry" role="listitem">
Hidalgo, César A, and Ricardo Hausmann. 2009. <span>“The Building Blocks of Economic Complexity.”</span> <em>Proceedings of the National Academy of Sciences</em> 106 (26): 10570–75.
</div>
<div id="ref-landau2021targets" class="csl-entry" role="listitem">
Landau, William Michael. 2021. <span>“The Targets r Package: A Dynamic Make-Like Function-Oriented Pipeline Toolkit for Reproducibility and High-Performance Computing.”</span> <em>Journal of Open Source Software</em> 6 (57): 2959.
</div>
<div id="ref-lee2018early" class="csl-entry" role="listitem">
Lee, Changyong, Ohjin Kwon, Myeongjung Kim, and Daeil Kwon. 2018. <span>“Early Identification of Emerging Technologies: A Machine Learning Approach Using Multiple Patent Indicators.”</span> <em>Technological Forecasting and Social Change</em> 127: 291–303.
</div>
<div id="ref-li2024evaluating" class="csl-entry" role="listitem">
Li, Yang, and Frank MH Neffke. 2024. <span>“Evaluating the Principle of Relatedness: Estimation, Drivers and Implications for Policy.”</span> <em>Research Policy</em> 53 (3): 104952.
</div>
<div id="ref-pinheiro2025dark" class="csl-entry" role="listitem">
Pinheiro, Flavio L, Pierre-Alexandre Balland, Ron Boschma, and Dominik Hartmann. 2025. <span>“The Dark Side of the Geography of Innovation: Relatedness, Complexity and Regional Inequality in Europe.”</span> <em>Regional Studies</em> 59 (1): 2106362.
</div>
<div id="ref-pinheiro2022time" class="csl-entry" role="listitem">
Pinheiro, Flávio L, Dominik Hartmann, Ron Boschma, and César A Hidalgo. 2022. <span>“The Time and Frequency of Unrelated Diversification.”</span> <em>Research Policy</em> 51 (8): 104323.
</div>
<div id="ref-wright2017ranger" class="csl-entry" role="listitem">
Wright, Marvin N, and Andreas Ziegler. 2017. <span>“Ranger: A Fast Implementation of Random Forests for High Dimensional Data in c++ and r.”</span> <em>Journal of Statistical Software</em> 77: 1–17.
</div>
<div id="ref-zaccaria2018integrating" class="csl-entry" role="listitem">
Zaccaria, Andrea, Saurabh Mishra, Masud Z Cader, and Luciano Pietronero. 2018. <span>“Integrating Services in the Economic Fitness Approach.”</span> <em>World Bank Policy Research Working Paper</em>, no. 8485.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./lit_rev.html" class="pagination-link" aria-label="Literature review">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Literature review</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./results.html" class="pagination-link" aria-label="Results">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Results</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>